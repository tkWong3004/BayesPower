% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/BF_users_functions.r
\name{BFpower.ttest.TwoSamples}
\alias{BFpower.ttest.TwoSamples}
\title{Sample Size Determination for the Two-Sample Bayesian t-Test}
\usage{
BFpower.ttest.TwoSamples(
  alternative = "two.sided",
  e = NULL,
  prior_analysis = "normal",
  location = 0,
  scale = 0.707,
  dff = 1,
  prior_design = NULL,
  location_d = 0,
  scale_d = 0.707,
  dff_d = 1,
  N1 = NULL,
  N2 = NULL,
  r = NULL,
  type_rate = "positive",
  true_rate = 0.8,
  false_rate = 0.05,
  D = 3,
  plot_power = FALSE,
  plot_rel = FALSE
)
}
\arguments{
\item{alternative}{Character. The alternative hypothesis being tested: \code{"two-sided"} (default), \code{"greater"}, or \code{"less"}.}

\item{e}{Optional numeric vector. Bounds for an interval null hypothesis:
\itemize{
\item For \code{alternative = "two.sided"}, must be a numeric vector of length 2 with distinct finite values.
\item For \code{alternative = "greater"}, must be a single numeric scalar > 0.
\item For \code{alternative = "less"}, must be a single numeric scalar < 0.
}}

\item{prior_analysis}{Character. Analysis prior under the alternative hypothesis:
\code{"normal"} (default), \code{"moment"} (normal-moment prior), or \code{"t"} (t-Student distribution).}

\item{location}{Numeric scalar. Location parameter for the analysis prior under the alternative hypothesis. Default is 0.}

\item{scale}{Numeric scalar. Scale parameter for the analysis prior under the alternative hypothesis (must be > 0). Default is 0.707.}

\item{dff}{Numeric scalar. Degrees of freedom for the analysis prior under the alternative hypothesis (required if \code{prior_analysis = "t"}). Default is 1.}

\item{prior_design}{Optional character. Design prior under the alternative hypothesis:
\code{"normal"}, \code{"moment"}, \code{"t"}, or \code{"point"}. If omitted, the design prior is the same as the analysis prior.}

\item{location_d}{Numeric scalar. Location parameter for the design prior under the alternative hypothesis. Default is 0. Used only if \code{prior_design} is chosen.}

\item{scale_d}{Numeric scalar. Scale parameter for the design prior under the alternative hypothesis. Default is 0.707. Used only if \code{prior_design} is chosen.}

\item{dff_d}{Numeric scalar. Degrees of freedom for the design prior under the alternative hypothesis (required if \code{prior_design = "t"}). Default is 1. Used only if \code{prior_design} is chosen.}

\item{N1}{Optional numeric scalar. Sample size for group 1 (used if \code{r = NULL}).}

\item{N2}{Optional numeric scalar. Sample size for group 2 (used if \code{r = NULL}).}

\item{r}{Optional numeric scalar. Ratio of sample size \code{N2 / N1} (used if \code{N1} and \code{N2} are \code{NULL}).}

\item{type_rate}{Character. Either \code{"positive"} (control true/false positive rates) or \code{"negative"} (control true/false negative rates). Default is \code{"positive"}.}

\item{true_rate}{Numeric scalar. Depending on \code{type_rate}, it is either the targeted true positive or true negative rate (between 0.6 and 0.999). Default is 0.8.}

\item{false_rate}{Numeric scalar. Depending on \code{type_rate}, it is either the targeted false positive or false negative rate (between 0.001 and 0.1). Default is 0.05.}

\item{D}{Numeric scalar. Threshold of compelling evidence (must be > 1). Default is 3.}

\item{plot_power}{Logical. If \code{TRUE}, plots power curve. Default is \code{FALSE}.}

\item{plot_rel}{Logical. If \code{TRUE}, plots relative likelihood curve. Default is \code{FALSE}.}
}
\value{
An object of class \code{BFpower_t} containing 10 elements:
\describe{
\item{type}{Character string describing the test type, always "Indepedent-samples t-test (equal variance)".}
\item{alternative}{Character, the tested alternative hypothesis.}
\item{e}{Optional numeric vector for interval null bounds.}
\item{analysis_h1}{List with the analysis prior parameters: \code{prior_analysis}, \code{location}, \code{scale}, and optionally \code{dff}.}
\item{design_h1}{List with the design prior parameters: \code{prior_design}, \code{location}, \code{scale}, and optionally \code{dff} (or \code{NULL} if not provided).}
\item{results}{Data frame with the probabilities of compelling/misleading evidence (\code{NaN} if calculation fails), and with the required sample size.}
\item{D}{Numeric, threshold of compelling evidence.}
\item{plot_power}{Logical, whether to plot the power curve.}
\item{plot_rel}{Logical, whether the relationship between the BF and t-value is plotted.}
}
}
\description{
Perform sample size determination or calculate the probability of obtaining
compelling or misleading evidence for a two-sample Bayesian t-test.
Can handle both point-null and interval-null hypothesis, and allows specifying
analysis and design priors.
}
\details{
\strong{1. Sample size determination mode (when \code{N1 = NULL} and \code{N2 = NULL}, but \code{r} is provided):}

If no sample sizes are provided, the function calculates the minimum sample size required for both groups to meet the desired requirements. In this mode, the user must supply the following arguments:
\itemize{
\item \code{type_rate} - either \code{"positive"} to control true/false positive rates,
or \code{"negative"} to control true/false negative rates.
\item \code{true_rate} - the targeted true positive or true negative rate (between 0.6 and 0.999).
\item \code{false_rate} - the acceptable false positive or false negative rate (between 0.001 and 0.1).
\item \code{D} - the Bayes factor threshold for compelling evidence (must be > 1).
\item \code{r} - the allocation ratio of group 2 to group 1 sample sizes (\code{N2/N1}).
}

The function iteratively finds the smallest sample sizes \code{N1} and \code{N2 = r * N1} for which the probability
of obtaining compelling evidence meets or exceeds \code{true_rate}, while the probability of misleading evidence
does not exceed \code{false_rate}.

\strong{2. Fixed-sample analysis mode (when \code{N1} and \code{N2} are supplied):}

If positive numeric sample sizes \code{N1} and \code{N2} are provided, the function computes
the probabilities of obtaining compelling or misleading evidence for those fixed sample sizes. In this mode,
the arguments \code{type_rate}, \code{true_rate}, and \code{false_rate} are ignored; only the Bayes factor threshold \code{D} is used.

\strong{Analysis Priors:}

The analysis prior specifies the prior distribution of the effect under the alternative hypothesis. The user must provide:
\itemize{
\item \code{prior_analysis} - the type of prior: \code{"normal"}, \code{"moment"} (normal-moment prior), or \code{"t"}.
\item \code{location} - the mean or location of the prior.
\item \code{scale} - the standard deviation or scale (must be positive).
\item \code{dff} - degrees of freedom (required if \code{prior_analysis = "t"}).
}

\strong{Design Priors (optional):}

A design prior can be supplied to reflect uncertainty about the effect size during study planning. If provided, the following must be supplied:
\itemize{
\item \code{prior_design} - the type of design prior: \code{"normal"}, \code{"moment"}, \code{"t"}, or \code{"point"}.
\item \code{location_d} - the location of the design prior.
\item \code{scale_d} - the scale parameter (positive for all models except \code{"point"}).
\item \code{dff_d} - degrees of freedom for \code{"t"} design priors.
}

\strong{Interval Null Hypothesis:}

The argument \code{e} specifies the bounds of an interval null hypothesis.
If \code{e} is provided, the function evaluates the Bayes factor for an interval
null hypothesis. For a point-null hypothesis, \code{e} should be left as \code{NULL}.

\strong{Plotting:}

If \code{plot_power = TRUE}, the function plots the probability of compelling
evidence as a function of the sample sizes. If \code{plot_rel = TRUE}, a relative
likelihood curve is plotted to illustrate how evidence varies with effect size.
}
\examples{
# Sample size determination with a point-null hypothesis:
BFpower.ttest.TwoSamples(
  alternative    = "two.sided",
  prior_analysis = "t",
  location       = 0,
  scale          = 0.707,
  dff            = 1,
  type_rate      = "positive",
  true_rate      = 0.8,
  false_rate     = 0.05,
  D              = 3, 
  r              = 1
)

# P robability of obtaining compelling / misleading evidence using an interval null hypothesis:
BFpower.ttest.TwoSamples(
  alternative    = "greater",
  e              = 0.2,
  prior_analysis = "normal",
  location       = 0,
  scale          = 1,
  dff            = 0,
  N1             = 30,
  N2             = 25, 
  type_rate      = "positive",
  true_rate      = 0.8,
  false_rate     = 0.05,
  D              = 3
)

}
